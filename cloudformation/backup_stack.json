{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "Stack for OpenMRS servers backups",
  "Resources" : {
    "openmrstalkbackup" : {
      "Type" : "AWS::S3::Bucket",
      "Properties" : {
        "BucketName" : "openmrs-talk-backup",
        "LifecycleConfiguration": {
          "Rules": [{
             "Id": "archive-and-delete",
             "Status": "Enabled",
             "ExpirationInDays": 180,
             "Transitions": [{
                "StorageClass" : "GLACIER",
                "TransitionInDays" : 30
            }]
          }]
        }
      }
    },
    "openmrsmanualbackup" : {
      "Type" : "AWS::S3::Bucket",
      "Properties" : {
        "BucketName" : "openmrs-manual-backup"
      }
    }
  }
}
